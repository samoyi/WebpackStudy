# 单页面应用使用Webpack的必要性

## 基础前端单页面开发依赖管理的弊端
看下面最简单的一个前端应用：
```html
<!doctype html>
<html>
<head>
    <title>起步</title>
</head>
<body>
    <script src="https://unpkg.com/lodash@4.16.6"></script>
    <script src="./src/anohter.js"></script>
    <script src="./src/index.js"></script>
</body>
</html>
```
### 全局变量污染
* `lodash`的脚本会产生一个全局变量`_`，从而影响到后两个脚本
* `another.js`有可能也会产生全局变量，影响到`index.js`

### 依赖关系不明确
* 除非你仔细检查`another.js`和`index.js`的代码，否则你不知道它们两个是否都依赖
`lodash`，或者是只有一个依赖`lodash`。这样你也就不知道如果修改或删除`lodash`将造成什么
影响

## 问题的严重性会随着应用的复杂度的提升而明显加重
在规模较小的单页面应用里，上述问题其实都不算问题，只要稍加小心都可以避免。  
但对于一个**规模较大**、**多人合作开发**且**需要长期维护**的项目，上述缺陷就会带来明显
的问题。  
### 为了不会有全局变量冲突，需要保证：
1. 在任何时候、任何开发人员都明确知道有哪些全部变量。  
2. 这需要维护一个随时更新的全局变量列表，并且保证每次更新都要通知到所有的开发成员。  
3. 而且因为有可能有两个开发人员同时引入同一个全局变量，所以该全局变量列表必须有一个人
来专门维护，防止冲突。也就是说一个开发人员想引入一个全局变量是，先要提交审批。

### 为了保证多脚本之间依赖的正确性，需要保证：
1. 在任何时候、任何开发人员都明确了解所有脚本的依赖关系。
2. 需要维护一个所有脚本的依赖关系网络图。每次修改或删除一个依赖时，要明确对关系网中对
其他脚本的影响；添加一个依赖时，保证添加到网络中合适的位置，不能为了图方便就添加的太靠
前而增加全局变量冲突的风险。  
3. 同样，这个依赖关系网络图的每次更新，都要及时通知到所有的开发成员。
4. 也一样需要一个人专门维护，任何开发人员需要修改依赖网时，都要先提交审批，防止同时修
改造成的混乱。


## 关于模块化开发
广义上来说，任何开发方式都是模块化开发的。因为你总是要写完一部分再写另一部分，或者不同
的人写不同的部分。而狭义的模块化开发则要求各个模块之间不会互相影响。  
因此，前述的开发方式只能算是广义的模块化开发，或者应该说是通过费力的维护，勉强实现了狭
义的模块化开发。  
而webpack的作用，就是轻松的实现狭义的模块化开发。


## 为什么要用Webpack
* TODO：css文件为什么通过require引入，和link引入有什么区别
* TODO：使用webpack似乎可以做到随意添加和删除依赖（是否require），但也不能做到随意修
改依赖。
* TODO：使用webpack仍然无法做到比如header模块里不能影响footer模块这样的。因为在
header模块里还是可以随意获取footer模块中的节点，也能修改其样式。

## References
* [Webpack文档](https://webpack.js.org/guides/getting-started/)
